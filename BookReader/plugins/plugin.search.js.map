{"version":3,"file":"plugins/plugin.search.js","mappings":"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","sources":["webpack://@internetarchive/bookreader/./src/plugins/search/view.js","webpack://@internetarchive/bookreader/./src/plugins/search/plugin.search.js","webpack://@internetarchive/bookreader/./node_modules/core-js/internals/number-parse-float.js","webpack://@internetarchive/bookreader/./node_modules/core-js/modules/es.object.entries.js","webpack://@internetarchive/bookreader/./node_modules/core-js/modules/es.parse-float.js"],"sourcesContent":["import { escapeHTML } from \"../../BookReader/utils.js\";\n\nclass SearchView {\n  /**\n   * @param {object} params\n   * @param {object} params.br The BookReader instance\n   * @param {function} params.cancelSearch callback when a user wants to cancel search\n   *\n   * @event BookReader:SearchResultsCleared - when the search results nav gets cleared\n   * @event BookReader:ToggleSearchMenu - when search results menu should toggle\n   */\n  constructor({ br, searchCancelledCallback = () => {} }) {\n    this.br = br;\n\n    // Search results are returned as a text blob with the hits wrapped in\n    // triple mustaches. Hits occasionally include text beyond the search\n    // term, so everything within the staches is captured and wrapped.\n    this.matcher = new RegExp('{{{([^]+?)}}}', 'g'); // [^] matches any character, including line breaks\n    this.matches = [];\n    this.cacheDOMElements();\n    this.bindEvents();\n    this.cancelSearch = searchCancelledCallback;\n  }\n\n  cacheDOMElements() {\n    this.dom = {};\n    // Search input within the top toolbar. Will be removed once the mobile menu is replaced.\n    this.dom.toolbarSearch = this.buildToolbarSearch();\n  }\n\n  /**\n   * @param {string} query\n   */\n  setQuery(query) {\n    this.br.$('[name=\"query\"]').val(query);\n  }\n\n  emptyMatches() {\n    this.matches = [];\n  }\n\n  removeResultPins() {\n    this.br.$('.BRnavpos .BRsearch').remove();\n  }\n\n  clearSearchFieldAndResults(dispatchEventWhenComplete = true) {\n    this.br.removeSearchResults();\n    this.removeResultPins();\n    this.emptyMatches();\n    this.setQuery('');\n    this.teardownSearchNavigation();\n    if (dispatchEventWhenComplete) {\n      this.br.trigger('SearchResultsCleared');\n    }\n  }\n\n  toggleSidebar() {\n    this.br.trigger('ToggleSearchMenu');\n  }\n\n  renderSearchNavigation() {\n    const selector = 'BRsearch-navigation';\n    $('.BRnav').before(`\n      <div class=\"${selector}\">\n        <button class=\"toggle-sidebar\">\n          <h4>\n            <span class=\"icon icon-search\"></span> Results\n          </h4>\n        </button>\n        <div class=\"pagination\">\n          <button class=\"prev\" title=\"Previous result\"><span class=\"icon icon-chevron hflip\"></span></button>\n          <span data-id=\"resultsCount\">${this.resultsPosition()}</span>\n          <button class=\"next\" title=\"Next result\"><span class=\"icon icon-chevron\"></button>\n        </div>\n        <button class=\"clear\" title=\"Clear search results\">\n          <span class=\"icon icon-close\"></span>\n        </button>\n      </div>\n    `);\n    this.dom.searchNavigation = $(`.${selector}`);\n  }\n\n  resultsPosition() {\n    let positionMessage = `${this.matches.length} result${this.matches.length === 1 ? '' : 's'}`;\n    if (~this.currentMatchIndex) {\n      positionMessage = `${this.currentMatchIndex + 1} / ${this.matches.length}`;\n    }\n    return positionMessage;\n  }\n\n  bindSearchNavigationEvents() {\n    if (!this.dom.searchNavigation) { return; }\n    const namespace = 'searchNavigation';\n\n    this.dom.searchNavigation\n      .on(`click.${namespace}`, '.clear', this.clearSearchFieldAndResults.bind(this))\n      .on(`click.${namespace}`, '.prev', this.showPrevResult.bind(this))\n      .on(`click.${namespace}`, '.next', this.showNextResult.bind(this))\n      .on(`click.${namespace}`, '.toggle-sidebar', this.toggleSidebar.bind(this))\n      .on(`click.${namespace}`, false);\n  }\n\n  showPrevResult() {\n    if (this.currentMatchIndex === 0) { return; }\n    if (this.br.mode === this.br.constModeThumb) { this.br.switchMode(this.br.constMode1up); }\n    if (!~this.currentMatchIndex) {\n      this.currentMatchIndex = this.getClosestMatchIndex((start, end, comparator) => end[0] > comparator) + 1;\n    }\n    this.br.$('.BRnavline .BRsearch').eq(--this.currentMatchIndex).click();\n    this.updateResultsPosition();\n    this.updateSearchNavigationButtons();\n  }\n\n  showNextResult() {\n    if (this.currentMatchIndex + 1 === this.matches.length) { return; }\n    if (this.br.mode === this.br.constModeThumb) { this.br.switchMode(this.br.constMode1up); }\n    if (!~this.currentMatchIndex) {\n      this.currentMatchIndex = this.getClosestMatchIndex((start, end, comparator) => start[start.length - 1] > comparator) - 1;\n    }\n    this.br.$('.BRnavline .BRsearch').eq(++this.currentMatchIndex).click();\n    this.updateResultsPosition();\n    this.updateSearchNavigationButtons();\n  }\n\n  /**\n   * Obtains closest match based on the logical comparison function passed in.\n   * When the comparison function returns true, the starting (left) half of the\n   * matches array is used in the binary split, else the ending (right) half is\n   * used. A recursive call is made to perform the same split and comparison\n   * on the winning half of the matches. This is traditionally known as binary\n   * search (https://en.wikipedia.org/wiki/Binary_search_algorithm), and in\n   * most cases (medium to large search result arrays) should outperform\n   * traversing the array from start to finish. In the case of small arrays,\n   * the speed difference is negligible.\n   *\n   * @param {function} comparisonFn\n   * @return {number} matchIndex\n   */\n  getClosestMatchIndex(comparisonFn) {\n    const matchPages = this.matches.map((m) => m.par[0].page);\n    const currentPage = this.br.currentIndex() + 1;\n    const closestTo = (pool, comparator) => {\n      if (pool.length === 1) { return pool[0]; }\n      const start = pool.slice(0, pool.length / 2);\n      const end = pool.slice(pool.length / 2);\n      return closestTo((comparisonFn(start, end, comparator) ? start : end), comparator);\n    };\n\n    const closestPage = closestTo(matchPages, currentPage);\n    return this.matches.indexOf(this.matches.find((m) => m.par[0].page === closestPage));\n  }\n\n  updateResultsPosition() {\n    if (!this.dom.searchNavigation) return;\n    this.dom.searchNavigation.find('[data-id=resultsCount]').text(this.resultsPosition());\n  }\n\n  updateSearchNavigationButtons() {\n    if (!this.dom.searchNavigation) return;\n    this.dom.searchNavigation.find('.prev').attr('disabled', !this.currentMatchIndex);\n    this.dom.searchNavigation.find('.next').attr('disabled', this.currentMatchIndex + 1 === this.matches.length);\n  }\n\n  teardownSearchNavigation() {\n    if (!this.dom.searchNavigation) {\n      this.dom.searchNavigation = $('.BRsearch-navigation');\n    }\n    if (!this.dom.searchNavigation.length) { return; }\n\n    this.dom.searchNavigation.off('.searchNavigation').remove();\n    this.dom.searchNavigation = null;\n    this.br.resize();\n  }\n\n  setCurrentMatchIndex() {\n    let matchingSearchResult;\n    if (this.br.mode === this.br.constModeThumb) {\n      this.currentMatchIndex = -1;\n      return;\n    }\n    if (this.br.mode === this.br.constMode2up) {\n      matchingSearchResult = this.find2upMatchingSearchResult();\n    }\n    else {\n      matchingSearchResult = this.find1upMatchingSearchResult();\n    }\n    this.currentMatchIndex = this.matches.indexOf(matchingSearchResult);\n  }\n\n  find1upMatchingSearchResult() {\n    return this.matches.find((m) => this.br.currentIndex() === m.par[0].page - 1);\n  }\n\n  find2upMatchingSearchResult() {\n    return this.matches.find((m) => this.br._isIndexDisplayed(m.par[0].page - 1));\n  }\n\n  updateSearchNavigation() {\n    if (!this.matches.length) { return; }\n\n    this.setCurrentMatchIndex();\n    this.updateResultsPosition();\n    this.updateSearchNavigationButtons();\n  }\n\n  /**\n   * @param {boolean} bool\n   */\n  togglePinsFor(bool) {\n    const pinsVisibleState = bool ? 'visible' : 'hidden';\n    this.br.refs.$BRfooter.find('.BRsearch').css({ visibility: pinsVisibleState });\n  }\n\n  buildToolbarSearch() {\n    const toolbarSearch = document.createElement('span');\n    toolbarSearch.classList.add('BRtoolbarSection', 'BRtoolbarSectionSearch');\n    toolbarSearch.innerHTML = `\n      <form class=\"BRbooksearch desktop\">\n        <input type=\"search\" name=\"query\" class=\"BRsearchInput\" value=\"\" placeholder=\"Search inside\"/>\n        <button type=\"submit\" class=\"BRsearchSubmit\">\n          <img src=\"${this.br.imagesBaseURL}icon_search_button.svg\" />\n        </button>\n      </form>\n    `;\n    return toolbarSearch;\n  }\n\n  /**\n   * @param {array} matches\n   */\n  renderPins(matches) {\n    matches.forEach((match) => {\n      const queryString = match.text;\n      const pageIndex = this.br.book.leafNumToIndex(match.par[0].page);\n      const uiStringSearch = \"Search result\"; // i18n\n\n      const percentThrough = this.br.constructor.util.cssPercentage(pageIndex, this.br.book.getNumLeafs() - 1);\n\n      const escapedQueryString = escapeHTML(queryString);\n      const queryStringWithB = escapedQueryString.replace(this.matcher, '<b>$1</b>');\n\n      let queryStringWithBTruncated = '';\n\n      if (queryString.length > 100) {\n        queryStringWithBTruncated = queryString.replace(/^(.{100}[^\\s]*).*/, \"$1\");\n\n        // If truncating, we must escape *after* truncation occurs (but before wrapping in <b>)\n        queryStringWithBTruncated = escapeHTML(queryStringWithBTruncated)\n          .replace(this.matcher, '<b>$1</b>')\n          + '...';\n      }\n\n      // draw marker\n      $('<div>')\n        .addClass('BRsearch')\n        .css({\n          left: percentThrough,\n        })\n        .attr('title', uiStringSearch)\n        .append(`\n          <div class=\"BRquery\">\n            <div>${queryStringWithBTruncated || queryStringWithB}</div>\n            <div>Page ${match.displayPageNumber}</div>\n          </div>\n        `)\n        .appendTo(this.br.$('.BRnavline'))\n        .on(\"mouseenter\", (event) => {\n          // remove from other markers then turn on just for this\n          // XXX should be done when nav slider moves\n          const marker = event.currentTarget;\n          const tooltip = marker.querySelector('.BRquery');\n          const tooltipOffset = tooltip.getBoundingClientRect();\n          const targetOffset = marker.getBoundingClientRect();\n          const boxSizeAdjust = parseInt(getComputedStyle(tooltip).paddingLeft) * 2;\n          if (tooltipOffset.x - boxSizeAdjust < 0) {\n            tooltip.style.setProperty('transform', `translateX(-${targetOffset.left - boxSizeAdjust}px)`);\n          }\n          $('.BRsearch,.BRchapter').removeClass('front');\n          $(event.target).addClass('front');\n        })\n        .on(\"mouseleave\", (event) => $(event.target).removeClass('front'))\n        .on(\"click\", () => { this.br._searchPluginGoToResult(match.matchIndex); });\n    });\n  }\n\n  /**\n   * @param {boolean} bool\n   */\n  toggleSearchPending(bool) {\n    if (bool) {\n      this.br.showProgressPopup(\"Search results will appear below...\", () => this.progressPopupClosed());\n    }\n    else {\n      this.br.removeProgressPopup();\n    }\n  }\n\n  /**\n   * Primary callback when user cancels search popup\n   */\n  progressPopupClosed() {\n    this.toggleSearchPending();\n    this.cancelSearch();\n  }\n\n  renderErrorModal(textIsProcessing = false) {\n    const errorDetails = `${!textIsProcessing ? 'The text may still be processing. ' : ''}Please try again.`;\n    this.renderModalMessage(`\n      Sorry, there was an error with your search.\n      <br />\n      ${errorDetails}\n    `);\n    this.delayModalRemovalFor(4000);\n  }\n\n  renderBookNotIndexedModal() {\n    this.renderModalMessage(`\n      <p>\n         This book hasn't been indexed for searching yet.\n         We've just started indexing it, so search should be available soon.\n         <br />\n         Please try again later. Thanks!\n      </p>\n    `);\n    this.delayModalRemovalFor(5000);\n  }\n\n  renderResultsEmptyModal() {\n    this.renderModalMessage('No matches were found.');\n    this.delayModalRemovalFor(2000);\n  }\n\n  /**\n   * @param {string} messageHTML The innerHTML string used to popupate the modal contents\n   */\n  renderModalMessage(messageHTML) {\n    const modal = document.createElement('div');\n    modal.classList.add('BRprogresspopup', 'search_modal');\n    modal.innerHTML = messageHTML;\n    document.querySelector(this.br.el).append(modal);\n  }\n\n  /**\n   * @param {number} timeoutMS\n   */\n  delayModalRemovalFor(timeoutMS) {\n    setTimeout(this.br.removeProgressPopup.bind(this.br), timeoutMS);\n  }\n\n  /**\n   * @param {Event} e\n   */\n  submitHandler(e) {\n    e.preventDefault();\n    const query = e.target.querySelector('[name=\"query\"]').value;\n    if (!query.length) { return false; }\n    this.br.search(query);\n    this.emptyMatches();\n    this.toggleSearchPending(true);\n    return false;\n  }\n\n  /**\n   * @param {Event} e\n   * @param {object} properties\n   *   @param {object} properties.results\n   *   @param {object} properties.options\n   */\n  handleSearchCallback(e, { results, options }) {\n    this.matches = results.matches;\n    this.setCurrentMatchIndex();\n    this.teardownSearchNavigation();\n    this.renderSearchNavigation();\n    this.bindSearchNavigationEvents();\n    this.renderPins(results.matches);\n    this.toggleSearchPending(false);\n    if (options.goToFirstResult) {\n      $(document).one('BookReader:pageChanged', () => {\n        this.br.resize();\n      });\n    } else {\n      this.br.resize();\n    }\n  }\n\n  handleSearchStarted() {\n    this.emptyMatches();\n    this.br.removeSearchHilites();\n    this.removeResultPins();\n    this.toggleSearchPending(true);\n    this.teardownSearchNavigation();\n    this.setQuery(this.br.searchTerm);\n  }\n\n  /**\n   * Event listener for: `BookReader:SearchCallbackError`\n   * @param {CustomEvent} event\n   */\n  handleSearchCallbackError(event = {}) {\n    this.toggleSearchPending(false);\n    const isIndexed = event?.detail?.props?.results?.indexed;\n    this.renderErrorModal(isIndexed);\n  }\n\n  handleSearchCallbackBookNotIndexed() {\n    this.toggleSearchPending(false);\n    this.renderBookNotIndexedModal();\n  }\n\n  handleSearchCallbackEmpty() {\n    this.toggleSearchPending(false);\n    this.renderResultsEmptyModal();\n  }\n\n  bindEvents() {\n    const namespace = 'BookReader:';\n\n    window.addEventListener(`${namespace}SearchCallbackError`, this.handleSearchCallbackError.bind(this));\n    $(document).on(`${namespace}SearchCallback`, this.handleSearchCallback.bind(this))\n      .on(`${namespace}SearchStarted`, this.handleSearchStarted.bind(this))\n      .on(`${namespace}SearchCallbackBookNotIndexed`, this.handleSearchCallbackBookNotIndexed.bind(this))\n      .on(`${namespace}SearchCallbackEmpty`, this.handleSearchCallbackEmpty.bind(this))\n      .on(`${namespace}pageChanged`, this.updateSearchNavigation.bind(this));\n\n    this.dom.toolbarSearch.querySelector('form').addEventListener('submit', this.submitHandler.bind(this));\n  }\n}\n\nexport default SearchView;\n","// @ts-check\n/* global BookReader */\n/**\n * Plugin for Archive.org book search\n * NOTE: This script must be loaded AFTER `plugin.mobile_nav.js`\n * as it mutates mobile nav drawer\n *\n * Events fired at various points throughout search processing are published\n * on the document DOM element. These can be subscribed to using jQuery's event\n * binding method `$.fn.on`. All of the events are prefixed with a BookReader\n * namespace. The events are:\n *\n * @event BookReader:SearchStarted - When a search form is submitted, immediately\n *   before an AJAX call is made to request search results\n * @event BookReader:SearchCallback - When the search AJAX call is returned and at\n *   least one result is returned. The event callback receives an object\n *   with the `results`, plugin `options`, and the BookReader `instance`\n * @event BookReader:SearchCallbackError - When the AJAX request returns an error.\n *   Receives the `results` and `instance`\n * @event BookReader:SearchCallbackNotIndexed - When a message is received that\n *   the book has not had OCR text indexed yet. Receives `instance`\n * @event BookReader:SearchCallbackEmpty - When no results found. Receives\n *   `instance`\n * @event BookReader:SearchCanceled - When no results found. Receives\n *   `instance`\n */\nimport { poll } from '../../BookReader/utils.js';\nimport { renderBoxesInPageContainerLayer } from '../../BookReader/PageContainer.js';\nimport SearchView from './view.js';\n/** @typedef {import('../../BookReader/PageContainer').PageContainer} PageContainer */\n/** @typedef {import('../../BookReader/BookModel').PageIndex} PageIndex */\n/** @typedef {import('../../BookReader/BookModel').LeafNum} LeafNum */\n/** @typedef {import('../../BookReader/BookModel').PageNumString} PageNumString */\n\njQuery.extend(BookReader.defaultOptions, {\n  server: 'ia600609.us.archive.org',\n  bookId: '',\n  subPrefix: '',\n  bookPath: '',\n  enableSearch: true,\n  searchInsideUrl: '/fulltext/inside.php',\n  initialSearchTerm: null,\n});\n\n/** @override */\nBookReader.prototype.setup = (function (super_) {\n  return function (options) {\n    super_.call(this, options);\n\n    this.searchTerm = '';\n    this.searchResults = null;\n    this.searchInsideUrl = options.searchInsideUrl;\n    this.enableSearch = options.enableSearch;\n\n    // Base server used by some api calls\n    this.bookId = options.bookId;\n    this.server = options.server;\n    this.subPrefix = options.subPrefix;\n    this.bookPath = options.bookPath;\n\n    this.searchXHR = null;\n    this._cancelSearch.bind(this);\n    this.cancelSearchRequest.bind(this);\n\n    /** @type { {[pageIndex: number]: SearchInsideMatchBox[]} } */\n    this._searchBoxesByIndex = {};\n\n    this.searchView = undefined;\n  };\n})(BookReader.prototype.setup);\n\n/** @override */\nBookReader.prototype.init = (function (super_) {\n  return function () {\n    super_.call(this);\n    // give SearchView the most complete bookreader state\n    this.searchView = new SearchView({\n      br: this,\n      searchCancelledCallback: () => {\n        this._cancelSearch();\n        this.trigger('SearchCanceled', { term: this.searchTerm, instance: this });\n      }\n    });\n    if (this.options.enableSearch && this.options.initialSearchTerm) {\n      /**\n       * this.search() take two parameter\n       * 1. this.options.initialSearchTerm - search term\n       * 2. {\n       *  goToFirstResult: this.options.goToFirstResult,\n       *  suppressFragmentChange: false // always want to change fragment in URL\n       * }\n       */\n      this.search(\n        this.options.initialSearchTerm,\n        { goToFirstResult: this.options.goToFirstResult, suppressFragmentChange: false }\n      );\n    }\n  };\n})(BookReader.prototype.init);\n\n/** @override */\nBookReader.prototype.buildToolbarElement = (function (super_) {\n  return function () {\n    const $el = super_.call(this);\n    if (!this.enableSearch) { return; }\n    if (this.searchView.dom.toolbarSearch) {\n      $el.find('.BRtoolbarSectionInfo').after(this.searchView.dom.toolbarSearch);\n    }\n    return $el;\n  };\n})(BookReader.prototype.buildToolbarElement);\n\n/** @override */\nBookReader.prototype._createPageContainer = (function (super_) {\n  return function (index) {\n    const pageContainer = super_.call(this, index);\n    if (this.enableSearch && pageContainer.page && index in this._searchBoxesByIndex) {\n      const pageIndex = pageContainer.page.index;\n      const boxes = this._searchBoxesByIndex[pageIndex];\n      renderBoxesInPageContainerLayer(\n        'searchHiliteLayer',\n        boxes,\n        pageContainer.page,\n        pageContainer.$container[0],\n        boxes.map(b => `match-index-${b.matchIndex}`),\n      );\n    }\n    return pageContainer;\n  };\n})(BookReader.prototype._createPageContainer);\n\n/**\n * @typedef {object} SearchOptions\n * @property {boolean} goToFirstResult\n * @property {boolean} disablePopup\n * @property {(null|function)} error - @deprecated at v.5.0\n * @property {(null|function)} success - @deprecated at v.5.0\n */\n\n/**\n * Submits search request\n *\n * @param {string} term\n * @param {SearchOptions} overrides\n */\nBookReader.prototype.search = async function(term = '', overrides = {}) {\n  /** @type {SearchOptions} */\n  const defaultOptions = {\n    goToFirstResult: false, /* jump to the first result (default=false) */\n    disablePopup: false,    /* don't show the modal progress (default=false) */\n    suppressFragmentChange: false, /* don't change the URL on initial load */\n    error: null,            /* optional error handler (default=null) */\n    success: null,          /* optional success handler (default=null) */\n\n  };\n  const options = jQuery.extend({}, defaultOptions, overrides);\n  this.suppressFragmentChange = options.suppressFragmentChange;\n  this.searchCancelled = false;\n\n  // strip slashes, since this goes in the url\n  this.searchTerm = term.replace(/\\//g, ' ');\n\n  if (!options.suppressFragmentChange) {\n    this.trigger(BookReader.eventNames.fragmentChange);\n  }\n\n  // Add quotes to the term. This is to compenstate for the backends default OR query\n  // term = term.replace(/['\"]+/g, '');\n  // term = '\"' + term + '\"';\n\n  // Remove the port and userdir\n  const serverPath = this.server.replace(/:.+/, '');\n  const baseUrl = `https://${serverPath}${this.searchInsideUrl}?`;\n\n  // Remove subPrefix from end of path\n  let path = this.bookPath;\n  const subPrefixWithSlash = `/${this.subPrefix}`;\n  if (this.bookPath.length - this.bookPath.lastIndexOf(subPrefixWithSlash) == subPrefixWithSlash.length) {\n    path = this.bookPath.substr(0, this.bookPath.length - subPrefixWithSlash.length);\n  }\n\n  const urlParams = {\n    item_id: this.bookId,\n    doc: this.subPrefix,\n    path,\n    q: term,\n  };\n\n  // NOTE that the API does not expect / (slashes) to be encoded. (%2F) won't work\n  const paramStr = $.param(urlParams).replace(/%2F/g, '/');\n\n  const url = `${baseUrl}${paramStr}`;\n\n  const callSearchResultsCallback = (searchInsideResults) => {\n    if (this.searchCancelled) {\n      return;\n    }\n    const responseHasError = searchInsideResults.error || !searchInsideResults.matches.length;\n    const hasCustomError = typeof options.error === 'function';\n    const hasCustomSuccess = typeof options.success === 'function';\n\n    if (responseHasError) {\n      console.error('Search Inside Response Error', searchInsideResults.error || 'matches.length == 0');\n      hasCustomError\n        ? options.error.call(this, searchInsideResults, options)\n        : this.BRSearchCallbackError(searchInsideResults, options);\n    } else {\n      hasCustomSuccess\n        ? options.success.call(this, searchInsideResults, options)\n        : this.BRSearchCallback(searchInsideResults, options);\n    }\n  };\n\n  this.trigger('SearchStarted', { term: this.searchTerm, instance: this });\n  callSearchResultsCallback(await $.ajax({\n    url: url,\n    dataType: 'jsonp',\n    cache: true,\n    beforeSend: xhr => { this.searchXHR = xhr; },\n  }));\n};\n\n/**\n * cancels AJAX Call\n * emits custom event\n */\nBookReader.prototype._cancelSearch = function () {\n  this.searchXHR?.abort();\n  this.searchView.clearSearchFieldAndResults(false);\n  this.searchTerm = '';\n  this.searchXHR = null;\n  this.searchCancelled = true;\n  this.searchResults = [];\n};\n\n/**\n * External function to cancel search\n * checks for term & xhr in flight before running\n */\nBookReader.prototype.cancelSearchRequest = function () {\n  this.searchCancelled = true;\n  if (this.searchXHR !== null) {\n    this._cancelSearch();\n    this.searchView.toggleSearchPending();\n    this.trigger('SearchCanceled', { term: this.searchTerm, instance: this });\n  }\n};\n\n/**\n  * @typedef {object} SearchInsideMatchBox\n  * @property {number} page\n  * @property {number} r\n  * @property {number} l\n  * @property {number} b\n  * @property {number} t\n  * @property {HTMLDivElement} [div]\n  * @property {number} matchIndex This is a fake field! not part of the API response. The index of the match that contains this box in total search results matches.\n  */\n\n/**\n * @typedef {object} SearchInsideMatch\n * @property {number} matchIndex This is a fake field! Not part of the API response. It is added by the JS.\n * @property {string} displayPageNumber (fake field) The page number as it should be displayed in the UI.\n * @property {string} text\n * @property {Array<{ page: number, boxes: SearchInsideMatchBox[] }>} par\n */\n\n/**\n * @typedef {object} SearchInsideResults\n * @property {string} error\n * @property {SearchInsideMatch[]} matches\n * @property {boolean} indexed\n */\n\n/**\n * Attach some fields to search inside results\n * @param {SearchInsideResults} results\n * @param {(pageNum: LeafNum) => PageNumString} displayPageNumberFn\n */\nexport function marshallSearchResults(results, displayPageNumberFn) {\n  // Attach matchIndex to a few things to make it easier to identify\n  // an active/selected match\n  for (const [index, match] of results.matches.entries()) {\n    match.matchIndex = index;\n    match.displayPageNumber = displayPageNumberFn(match.par[0].page);\n    for (const par of match.par) {\n      for (const box of par.boxes) {\n        box.matchIndex = index;\n      }\n    }\n  }\n}\n\n/**\n * Search Results return handler\n * @param {SearchInsideResults} results\n * @param {object} options\n * @param {boolean} options.goToFirstResult\n */\nBookReader.prototype.BRSearchCallback = function(results, options) {\n  marshallSearchResults(results, pageNum => this.book.getPageNum(this.book.leafNumToIndex(pageNum)));\n  this.searchResults = results || [];\n\n  this.updateSearchHilites();\n  this.removeProgressPopup();\n  if (options.goToFirstResult) {\n    this._searchPluginGoToResult(0);\n  }\n  this.trigger('SearchCallback', { results, options, instance: this });\n};\n\n/**\n * Main search results error handler\n * @callback\n * @param {SearchInsideResults} results\n */\nBookReader.prototype.BRSearchCallbackError = function(results) {\n  this._BRSearchCallbackError(results);\n};\n\n/**\n * @private draws search results error\n * @callback\n * @param {SearchInsideResults} results\n * @param {jQuery} $el\n * @param {boolean} fade\n */\nBookReader.prototype._BRSearchCallbackError = function(results) {\n  this.searchResults = results;\n  const basePayload = {\n    term: this.searchTerm,\n    instance: this,\n  };\n  if (results.error) {\n    const payload = Object.assign({}, basePayload, { results });\n    this.trigger('SearchCallbackError', payload);\n  } else if (0 == results.matches.length) {\n    if (false === results.indexed) {\n      this.trigger('SearchCallbackBookNotIndexed', basePayload);\n      return;\n    }\n    this.trigger('SearchCallbackEmpty', basePayload);\n  }\n};\n\n/**\n * updates search on-page highlights controller\n */\nBookReader.prototype.updateSearchHilites = function() {\n  /** @type {SearchInsideMatch[]} */\n  const matches = this.searchResults?.matches || [];\n  /** @type { {[pageIndex: number]: SearchInsideMatchBox[]} } */\n  const boxesByIndex = {};\n\n  // Clear any existing svg layers\n  this.removeSearchHilites();\n\n  // Group by pageIndex\n  for (const match of matches) {\n    for (const box of match.par[0].boxes) {\n      const pageIndex = this.book.leafNumToIndex(box.page);\n      const pageBoxes = boxesByIndex[pageIndex] || (boxesByIndex[pageIndex] = []);\n      pageBoxes.push(box);\n    }\n  }\n\n  // update any already created pages\n  for (const [pageIndexString, boxes] of Object.entries(boxesByIndex)) {\n    const pageIndex = parseFloat(pageIndexString);\n    const page = this.book.getPage(pageIndex);\n    const pageContainers = this.getActivePageContainerElementsForIndex(pageIndex);\n    for (const container of pageContainers) {\n      renderBoxesInPageContainerLayer('searchHiliteLayer', boxes, page, container, boxes.map(b => `match-index-${b.matchIndex}`));\n    }\n  }\n\n  this._searchBoxesByIndex = boxesByIndex;\n};\n\n/**\n * remove search highlights\n */\nBookReader.prototype.removeSearchHilites = function() {\n  $(this.getActivePageContainerElements()).find('.searchHiliteLayer').remove();\n};\n\n/**\n * @private\n * Goes to the page specified. If the page is not viewable, tries to load the page\n * FIXME Most of this logic is IA specific, and should be less integrated into here\n * or at least more configurable.\n * @param {number} matchIndex\n */\nBookReader.prototype._searchPluginGoToResult = async function (matchIndex) {\n  const match = this.searchResults?.matches[matchIndex];\n  const book = this.book;\n  const pageIndex = book.leafNumToIndex(match.par[0].page);\n  const page = book.getPage(pageIndex);\n  const onNearbyPage = Math.abs(this.currentIndex() - pageIndex) < 3;\n  let makeUnviewableAtEnd = false;\n  if (!page.isViewable) {\n    const resp = await fetch('/services/bookreader/request_page?' + new URLSearchParams({\n      id: this.options.bookId,\n      subprefix: this.options.subPrefix,\n      leafNum: page.leafNum,\n    })).then(r => r.json());\n\n    for (const leafNum of resp.value) {\n      book.getPage(book.leafNumToIndex(leafNum)).makeViewable();\n    }\n\n    // not able to show page; make the page viewable anyways so that it can\n    // actually open. On IA, it has a fallback to a special error page.\n    if (!resp.value.length) {\n      book.getPage(pageIndex).makeViewable();\n      makeUnviewableAtEnd = true;\n    }\n\n    // Trigger an update of book\n    this._modes.mode1Up.mode1UpLit.updatePages();\n    if (this.activeMode == this._modes.mode1Up) {\n      await this._modes.mode1Up.mode1UpLit.updateComplete;\n    }\n  }\n  /* this updates the URL */\n  if (!this._isIndexDisplayed(pageIndex)) {\n    this.suppressFragmentChange = false;\n    this.jumpToIndex(pageIndex);\n  }\n\n  // Reset it to unviewable if it wasn't resolved\n  if (makeUnviewableAtEnd) {\n    book.getPage(pageIndex).makeViewable(false);\n  }\n\n  // Scroll/flash in the ui\n  const $boxes = await poll(() => $(`rect.match-index-${match.matchIndex}`), { until: result => result.length > 0 });\n  if ($boxes.length) {\n    $boxes.css('animation', 'none');\n    $boxes[0].scrollIntoView({\n      // Only vertically center the highlight if we're in 1up or in full screen. In\n      // 2up, if we're not fullscreen, the whole body gets scrolled around to try to\n      // center the highlight 🙄 See:\n      // https://stackoverflow.com/questions/11039885/scrollintoview-causing-the-whole-page-to-move/11041376\n      // Note: nearest doesn't quite work great, because the ReadAloud toolbar is now\n      // full-width, and covers up the last line of the highlight.\n      block: this.constMode1up == this.mode || this.isFullscreenActive ? 'center' : 'nearest',\n      inline: 'center',\n      behavior: onNearbyPage ? 'smooth' : 'auto',\n    });\n    // wait for animation to start\n    await new Promise(resolve => setTimeout(resolve, 100));\n    $boxes.removeAttr(\"style\");\n  }\n};\n\n/**\n * Removes all search pins\n */\nBookReader.prototype.removeSearchResults = function(suppressFragmentChange = false) {\n  this.removeSearchHilites(); //be sure to set all box.divs to null\n  this.searchTerm = null;\n  this.searchResults = null;\n  if (!suppressFragmentChange) {\n    this.trigger(BookReader.eventNames.fragmentChange);\n  }\n};\n\n/**\n * Returns true if a search highlight is currently being displayed\n * @returns {boolean}\n */\nBookReader.prototype.searchHighlightVisible = function() {\n  const results = this.searchResults;\n  let visiblePages = [];\n  if (null == results) return false;\n\n  if (this.constMode2up == this.mode) {\n    visiblePages = [this.twoPage.currentIndexL, this.twoPage.currentIndexR];\n  } else if (this.constMode1up == this.mode) {\n    visiblePages = [this.currentIndex()];\n  } else {\n    return false;\n  }\n\n  results.matches.some(match => {\n    return match.par[0].boxes.some(box => {\n      const pageIndex = this.book.leafNumToIndex(box.page);\n      if (jQuery.inArray(pageIndex, visiblePages) >= 0) {\n        return true;\n      }\n    });\n  });\n\n  return false;\n};\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar charAt = uncurryThis(''.charAt);\nvar $parseFloat = global.parseFloat;\nvar Symbol = global.Symbol;\nvar ITERATOR = Symbol && Symbol.iterator;\nvar FORCED = 1 / $parseFloat(whitespaces + '-0') !== -Infinity\n  // MS Edge 18- broken with boxed symbols\n  || (ITERATOR && !fails(function () { $parseFloat(Object(ITERATOR)); }));\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(toString(string));\n  var result = $parseFloat(trimmedString);\n  return result === 0 && charAt(trimmedString, 0) == '-' ? -0 : result;\n} : $parseFloat;\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var $ = require('../internals/export');\nvar $parseFloat = require('../internals/number-parse-float');\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\n$({ global: true, forced: parseFloat != $parseFloat }, {\n  parseFloat: $parseFloat\n});\n"],"names":["super_","SearchView","_ref","br","_ref$searchCancelledC","searchCancelledCallback","_classCallCheck","this","matcher","RegExp","matches","cacheDOMElements","bindEvents","cancelSearch","key","value","dom","toolbarSearch","buildToolbarSearch","query","$","val","remove","dispatchEventWhenComplete","arguments","length","undefined","removeSearchResults","removeResultPins","emptyMatches","setQuery","teardownSearchNavigation","trigger","selector","before","concat","resultsPosition","searchNavigation","positionMessage","currentMatchIndex","namespace","on","clearSearchFieldAndResults","bind","showPrevResult","showNextResult","toggleSidebar","mode","constModeThumb","switchMode","constMode1up","getClosestMatchIndex","start","end","comparator","eq","click","updateResultsPosition","updateSearchNavigationButtons","comparisonFn","closestPage","closestTo","pool","slice","map","m","par","page","currentIndex","indexOf","find","text","attr","off","resize","matchingSearchResult","constMode2up","find2upMatchingSearchResult","find1upMatchingSearchResult","_this","_this2","_isIndexDisplayed","setCurrentMatchIndex","bool","pinsVisibleState","refs","$BRfooter","css","visibility","document","createElement","classList","add","innerHTML","imagesBaseURL","_this3","forEach","match","queryString","pageIndex","book","leafNumToIndex","percentThrough","constructor","util","cssPercentage","getNumLeafs","queryStringWithB","escapeHTML","replace","queryStringWithBTruncated","addClass","left","append","displayPageNumber","appendTo","event","marker","currentTarget","tooltip","querySelector","tooltipOffset","getBoundingClientRect","targetOffset","boxSizeAdjust","parseInt","getComputedStyle","paddingLeft","x","style","setProperty","removeClass","target","_searchPluginGoToResult","matchIndex","_this4","showProgressPopup","progressPopupClosed","removeProgressPopup","toggleSearchPending","errorDetails","renderModalMessage","delayModalRemovalFor","messageHTML","modal","el","timeoutMS","setTimeout","e","preventDefault","search","_ref2","_this5","results","options","renderSearchNavigation","bindSearchNavigationEvents","renderPins","goToFirstResult","one","removeSearchHilites","searchTerm","_event$detail","_event$detail$props","_event$detail$props$r","isIndexed","detail","props","indexed","renderErrorModal","renderBookNotIndexedModal","renderResultsEmptyModal","window","addEventListener","handleSearchCallbackError","handleSearchCallback","handleSearchStarted","handleSearchCallbackBookNotIndexed","handleSearchCallbackEmpty","updateSearchNavigation","submitHandler","_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","done","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","apply","jQuery","extend","BookReader","defaultOptions","server","bookId","subPrefix","bookPath","enableSearch","searchInsideUrl","initialSearchTerm","setup","searchResults","searchXHR","_cancelSearch","cancelSearchRequest","_searchBoxesByIndex","searchView","init","term","instance","suppressFragmentChange","buildToolbarElement","$el","after","_createPageContainer","index","pageContainer","boxes","renderBoxesInPageContainerLayer","$container","b","_callee","overrides","serverPath","baseUrl","path","subPrefixWithSlash","urlParams","paramStr","url","callSearchResultsCallback","_args","_context","disablePopup","success","searchCancelled","eventNames","fragmentChange","lastIndexOf","substr","item_id","doc","q","param","searchInsideResults","responseHasError","hasCustomError","hasCustomSuccess","console","BRSearchCallbackError","BRSearchCallback","t0","ajax","dataType","cache","beforeSend","xhr","t1","_this$searchXHR","abort","displayPageNumberFn","_step","pageNum","_iterator","_createForOfIteratorHelper","entries","s","n","_step$value","_slicedToArray","getPageNum","_step2","_iterator2","_step3","_iterator3","f","marshallSearchResults","updateSearchHilites","_BRSearchCallbackError","basePayload","payload","assign","_this$searchResults","boxesByIndex","_step4","_iterator4","_step6","_iterator6","box","_i2","_Object$entries","_step5","_Object$entries$_i","pageIndexString","parseFloat","getPage","_iterator5","getActivePageContainerElementsForIndex","container","getActivePageContainerElements","_callee2","_this$searchResults2","onNearbyPage","makeUnviewableAtEnd","resp","_iterator7","_step7","leafNum","$boxes","_context2","Math","abs","isViewable","fetch","URLSearchParams","id","subprefix","r","json","makeViewable","_modes","mode1Up","mode1UpLit","updatePages","activeMode","updateComplete","jumpToIndex","poll","until","scrollIntoView","block","isFullscreenActive","inline","behavior","removeAttr","_x2","searchHighlightVisible","visiblePages","twoPage","currentIndexL","currentIndexR","some","inArray","global","fails","uncurryThis","toString","trim","whitespaces","$parseFloat","ITERATOR","FORCED","module","string","trimmedString","$entries","stat","O","forced"],"sourceRoot":""}